<% 
// Render files in current directory
if (it.files && it.files.length > 0) {
    it.files.forEach(function(file) { 
%>
        <li>
            <a href="/?tab=<%= it.activeTab || 'emails' %>&preview=<%= file.relativePath %>" 
               class="<%= it.selectedItem === file.relativePath ? 'active' : '' %>">
                ğŸ“„ <%= file.name %>
            </a>
        </li>
<% 
    });
}

// Render folders
if (it.folders && it.folders.length > 0) {
    it.folders.forEach(function(folder) { 
%>
        <li class="folder">
            <div class="folder-header" onclick="toggleFolder(this)">
                <span class="folder-icon">â–¶</span>
                ğŸ“ <%= folder.name %>
            </div>
            <div class="folder-content">
                <ul>
                    <%~ include('folder-structure', {
                        files: folder.files,
                        folders: folder.subfolders,
                        selectedItem: it.selectedItem,
                        activeTab: it.activeTab
                    }) %>
                </ul>
            </div>
        </li>
<% 
    });
}
%>