<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mailplex - Email Preview</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        .container { display: flex; height: 100vh; }
        .sidebar { width: 300px; background: #f5f5f5; border-right: 1px solid #ddd; overflow-y: auto; }
        .preview { flex: 1; background: white; overflow-y: auto; }
        .sidebar h2 { padding: 20px; background: #333; color: white; margin: 0; }
        .sidebar ul { list-style: none; }
        .sidebar li { border-bottom: 1px solid #ddd; }
        .sidebar a { display: block; padding: 15px 20px; text-decoration: none; color: #333; }
        .sidebar a:hover { background: #e9e9e9; }
        .sidebar a.active { background: #007acc; color: white; }
        .preview-content { padding: 20px; }
        .no-preview { color: #666; text-align: center; margin-top: 50px; }
        iframe { width: 100%; height: calc(100vh - 40px); border: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2>Email Templates</h2>
            <ul>
                <% if (it.emailFiles && it.emailFiles.length > 0) { %>
                    <% it.emailFiles.forEach(function(file){ %>
                        <li>
                            <a href="/?preview=<%= file.name %>" 
                               class="<%= it.selectedEmail === file.name ? 'active' : '' %>">
                                <%= file.name %>
                            </a>
                        </li>
                    <% }) %>
                <% } else { %>
                    <li style="padding: 20px; color: #666;">No email templates found</li>
                <% } %>
            </ul>
        </div>
        <div class="preview">
            <% if (it.previewContent) { %>
                <iframe srcdoc="<%~ it.previewContent %>"></iframe>
            <% } else { %>
                <div class="no-preview">Select an email template to preview</div>
            <% } %>
        </div>
    </div>
</body>
</html>